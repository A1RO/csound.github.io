<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Instruction {</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="ScoregensTop.html" title="Instructions de partition et routines GEN" />
    <link rel="prev" href="y.html" title="Instruction y (ou instruction graine)" />
    <link rel="next" href="rightbrace.html" title="Instruction }" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Instruction {</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="y.html">Précédent</a> </td>
          <th width="60%" align="center">Instructions de partition et routines GEN</th>
          <td width="20%" align="right"> <a accesskey="n" href="rightbrace.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="leftbrace"></a>
      <div class="titlepage"></div>
      <a id="IndexLeftBraceStatement" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">Instruction {</span>
        </h2>
        <p>{ — 
      Commence une boucle imbriquable, sans section.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887564482944"></a>
        <h2>Description</h2>
        <p>
      On peut utiliser les <span class="emphasis"><em>instructions {</em></span> et <span class="emphasis"><em>}</em></span> pour
      répéter un groupe d'instructions de partition. Ces boucles ne constituent pas des sections
      de partition indépendantes et peuvent ainsi répéter des évènements dans la même section.
      Plusieurs boucles peuvent se chevaucher dans le temps ou être imbriquées.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887564480416"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis"><span class="command"><strong>{</strong></span> p1 p2</pre>
      </div>
      <div class="refsect1">
        <a id="idm47887564478528"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>p1</em></span> -- Nombre de répétitions de la boucle.
    </p>
        <p>
      <span class="emphasis"><em>p2</em></span> -- Un nom de macro qui est automatiquement défini au début de la
      boucle et dont la valeur est incrémentée à chaque répétition (facultatif). La valeur
      initiale est zéro et la valeur finale est (p1 - 1).
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887564475648"></a>
        <h2>Exécution</h2>
        <p>
      L'<span class="emphasis"><em>instruction {</em></span> est utilisée conjointement avec
      l'<a class="link" href="rightbrace.html" title="Instruction }"><em class="citetitle">instruction }</em></a> pour définir des
      groupes d'évènements de partition qui se répètent. Une boucle de partition commence par
      l'<span class="emphasis"><em>instruction {</em></span> qui définit le nombre de répétitions et un nom de
      macro unique qui contiendra le compteur de boucle. Le corps d'une boucle peut contenir
      n'importe quel nombre d'évènements (y compris des sauts de section) et il se termine par
      une <span class="emphasis"><em>instruction }</em></span> ayant sa propre ligne. L'<span class="emphasis"><em>instruction }</em></span>
      ne prend pas de paramètre.
    </p>
        <p>
      Le terme "boucle" n'implique aucune sorte de succession temporelle pour les itérations de la
      boucle. Autrement dit, les valeurs p2 des évènements à l'intérieur de la boucle ne sont pas
      incrémentées automatiquement de la longueur de la boucle à chaque répétition. C'est un
      avantage car cela permet de définir facilement des groupes d'évènements simultanés. La macro
      de boucle peut être utilisée avec des
      <a class="link" href="ScoreEval.html" title="Evaluation des expressions"><em class="citetitle">expressions de partition</em></a> pour
      incrémenter les dates de début d'évènements ou pour faire varier les évènements de toute
      autre manière désirée à chaque répétition. Noter que à la différence de
      l'<span class="emphasis"><em>instruction r</em></span>, la valeur de la macro au premier passage dans la boucle
      est zéro (0), pas un (1). Ainsi la valeur finale est inférieure d'une unité au nombre de
      répétitions.
    </p>
        <p>
      Les boucles de partition sont un outil très puissant. Bien que semblables à l'outil de
      répétition de section (l'<a class="link" href="r.html" title="Instruction r (instruction répéter)"><em class="citetitle">instruction r</em></a>),
      leur principal avantage est que les évènements de partition dans les itérations successives
      de la boucle ne sont pas séparés par une fin de section. Ainsi, il est possible de créer
      plusieurs boucles qui se chevauchent dans le temps. Les boucles peuvent aussi être
      imbriquées jusqu'à une profondeur de 39 niveaux.
    </p>
        <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Warning: Avertissement">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Avertissement]" src="images/warning.png" />
              </td>
              <th align="left">Avertissement</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        En raison de sérieux problèmes d'interaction avec l'expension de macro, les boucles
        doivent commencer et se terminer dans le même fichier, et pas à l'intérieur d'une macro.
      </p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm47887564463616"></a>
        <h2>Exemples</h2>
        <p>
      Voici quelques exemples des <span class="emphasis"><em>instructions {</em></span> et <span class="emphasis"><em>}</em></span>.

      </p>
        <div class="example">
          <a id="idm47887564461776"></a>
          <p class="title">
            <strong>Exemple 1125. Répétition sequentielle d'une phrase de trois notes, quatre fois.</strong>
          </p>
          <div class="example-contents"><pre class="programlisting">
<span class="stamnt">{</span> 4 CNT

<span class="stamnt">i</span>1  [0.00 + 0.75 * $CNT.]   0.2   220
<span class="stamnt">i</span>1  [0.25 + 0.75 * $CNT.]   .     440
<span class="stamnt">i</span>1  [0.50 + 0.75 * $CNT.]   .     880

<span class="stamnt">}</span>
        </pre>
      interprété comme
        <pre class="programlisting">
<span class="stamnt">i</span>1  0.00   0.2   220
<span class="stamnt">i</span>1  0.25   .     440
<span class="stamnt">i</span>1  0.50   .     880

<span class="stamnt">i</span>1  0.75   0.2   220
<span class="stamnt">i</span>1  1.00   .     440
<span class="stamnt">i</span>1  1.25   .     880

<span class="stamnt">i</span>1  1.50   0.2   220
<span class="stamnt">i</span>1  1.75   .     440
<span class="stamnt">i</span>1  2.00   .     880

<span class="stamnt">i</span>1  2.25   0.2   220
<span class="stamnt">i</span>1  2.50   .     440
<span class="stamnt">i</span>1  2.75   .     880
        </pre></div>
        </div>
        <p><br class="example-break" />
    </p>
        <p>
      </p>
        <div class="example">
          <a id="idm47887564447360"></a>
          <p class="title">
            <strong>Exemple 1126. Création d'un groupe d'harmoniques simultanés.</strong>
          </p>
          <div class="example-contents">
        Dans cet exemple, <span class="emphasis"><em>p4</em></span> contient la fréquence de la note. 

        <pre class="programlisting">
<span class="stamnt">{</span> 8 PARTIAL
<span class="stamnt">i</span>1  0  1   [100 * ($PARTIAL. + 1)]
<span class="stamnt">}</span>
        </pre>
      interprété comme
        <pre class="programlisting">
<span class="stamnt">i</span>1  0  1   100
<span class="stamnt">i</span>1  0  1   200
<span class="stamnt">i</span>1  0  1   300
<span class="stamnt">i</span>1  0  1   400
<span class="stamnt">i</span>1  0  1   500
<span class="stamnt">i</span>1  0  1   600
<span class="stamnt">i</span>1  0  1   700
<span class="stamnt">i</span>1  0  1   800
        </pre></div>
        </div>
        <p><br class="example-break" />
    </p>
        <p>
      Voici un exemple complet des <span class="emphasis"><em>instructions {</em></span> et <span class="emphasis"><em>}</em></span>.
      Il utilise le fichier <a class="ulink" href="examples/leftbrace.csd" target="_top"><em class="citetitle">leftbrace.csd</em></a>.

     </p>
        <div class="example">
          <a id="idm47887564434832"></a>
          <p class="title">
            <strong>Exemple 1127. Un exemple de boucles imbriquées pour créer plusieurs clusters inharmoniques
        de sinus.</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm47887493944784"></a>
              <pre class="programlisting">
<span class="csdtag">&lt;CsoundSynthesizer&gt;</span>
<span class="csdtag">&lt;CsOptions&gt;</span>
<span class="comment">; Select audio/midi flags here according to platform</span>
<span class="comment">; Audio out   Audio in</span>
-odac           -iadc    <span class="comment">;;;RT audio I/O</span>
<span class="comment">; For Non-realtime ouput leave only the line below:</span>
<span class="comment">; -o abs.wav -W ;;; for file output any platform</span>
<span class="csdtag">&lt;/CsOptions&gt;</span>
<span class="csdtag">&lt;CsInstruments&gt;</span>
<span class="ohdr">nchnls</span> <span class="op">=</span> 2

gaReverbSend <span class="opc">init</span> 0

<span class="comment">; a simple sine wave partial</span>
<span class="oblock">instr</span> 1
    idur   <span class="op">=</span>       p3
    iamp   <span class="op">=</span>       p4
    ifreq  <span class="op">=</span>       p5
    aenv   <span class="opc">linseg</span>  0.0, 0.1<span class="op">*</span>idur, iamp, 0.6<span class="op">*</span>idur, iamp, 0.3<span class="op">*</span>idur, 0.0
    aosc   <span class="opc">oscili</span>  aenv, ifreq, 1
           <span class="opc">vincr</span>   gaReverbSend, aosc
<span class="oblock">endin</span>

<span class="comment">; global reverb instrument</span>
<span class="oblock">instr</span> 2
    al, ar <span class="opc">reverbsc</span> gaReverbSend, gaReverbSend, 0.85, 12000
           <span class="opc">outs</span>     gaReverbSend<span class="op">+</span>al, gaReverbSend<span class="op">+</span>ar
           <span class="opc">clear</span>    gaReverbSend
<span class="oblock">endin</span>

<span class="csdtag">&lt;/CsInstruments&gt;</span>
<span class="csdtag">&lt;CsScore&gt;</span>
<span class="stamnt">f</span>1 0 4096 10 1

{ 4 CNT
  { 8 PARTIAL
      <span class="comment">;   start time     duration            amplitude          frequency</span>
      
      <span class="stamnt">i</span>1  [0.5 * $CNT.]  [1 + ($CNT * 0.2)]  [500 + (~ * 200)]  [800 + (200 * $CNT.) + ($PARTIAL. * 20)]
  }
}

<span class="stamnt">i</span>2 0 6
<span class="stamnt">e</span>

<span class="csdtag">&lt;/CsScore&gt;</span>
<span class="csdtag">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887564432752"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Gabriel Maldonado</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Nouveau dans la version 3.52 (?) de Csound.  (Fixé dans la version 5.08).</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="y.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="ScoregensTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="rightbrace.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Instruction y (ou instruction graine) </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> Instruction }</td>
        </tr>
      </table>
    </div>
  </body>
</html>
