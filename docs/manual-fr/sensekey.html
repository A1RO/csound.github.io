<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>sensekey</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <link rel="stylesheet" type="text/css" href="syntax-highlighting.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="sense.html" title="sense" />
    <link rel="next" href="serialBegin.html" title="serialBegin" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">sensekey</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="sense.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="serialBegin.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="sensekey"></a>
      <div class="titlepage"></div>
      <a id="IndexSensekey" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">sensekey</span>
        </h2>
        <p>sensekey — 
      Retourne le code ASCII d'une touche enfoncée.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197555744144"></a>
        <h2>Description</h2>
        <p>
      Retourne le code ASCII d'une touche enfoncée ou -1 si aucune touche n'a été
      enfoncée.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197555742736"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">kres[, kkeydown] <span class="command"><strong>sensekey</strong></span></pre>
      </div>
      <div class="refsect1">
        <a id="idm46197555695072"></a>
        <h2>Exécution</h2>
        <p>
      <span class="emphasis"><em>kres</em></span> - retourne la valeur ASCII d'une touche qui a été
      enfoncée ou relachée.
    </p>
        <p>
      <span class="emphasis"><em>kkeydown</em></span> - retourne 1 si la touche a été enfoncée, 0
      si elle a été relachée ou s'il n'y a pas d'évènement de touche.
    </p>
        <p>
      On peut utiliser <span class="emphasis"><em>kres</em></span> pour lire les évènements clavier
      de stdin. Il retourne la valeur ASCII de toute touche qui a été enfoncée
      ou relachée, ou -1 s'il n'y a eu aucune activité clavier. La valeur de
      <span class="emphasis"><em>kkeydown</em></span> est 1 si une touche a été enfoncée, 0 sinon.
      Ce comportement est suivi par défaut, si bien qu'un relachement de touche
      est généré immédiatement après chaque pression de touche. Pour une
      fonctionnalité complète, on peut utiliser FLTK pour capturer les évènements
      clavier. <a class="link" href="FLpanel.html" title="FLpanel"><em class="citetitle">FLpanel</em></a>
      peut être utilisé pour capturer les évènements clavier et les envoyer à
      l'opcode <span class="emphasis"><em>sensekey</em></span> en ajoutant un argument supplémentaire
      facultatif. Voir <a class="link" href="FLpanel.html" title="FLpanel"><em class="citetitle">FLpanel</em></a>
      pour plus d'information.
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note: Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Cet opcode peut également s'écrire
        <a class="link" href="sense.html" title="sense"><em class="citetitle">sense</em></a>.
      </p>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="refsect1">
        <a id="idm46197555685120"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode sensekey. Il utilise le fichier
      <a class="ulink" href="examples/sensekey.csd" target="_top"><em class="citetitle">sensekey.csd</em></a>.

      </p>
        <div class="example">
          <a id="idm46197555683248"></a>
          <p class="title">
            <strong>Exemple 869. Exemple de l'opcode sensekey.</strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a>
        et <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour plus
        d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm46197371148656"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
<span class="c1">; Audio out   Audio in</span>
-odac           -iadc    <span class="c1">;;;RT audio I/O</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o sensekey.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>

<span class="c1">; Initialize the global variables.</span>
<span class="vg">sr</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="vg">kr</span> <span class="o">=</span> <span class="mi">4410</span>
<span class="vg">ksmps</span> <span class="o">=</span> <span class="mi">10</span>
<span class="vg">nchnls</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">; Instrument #1.</span>
<span class="kd">instr</span> <span class="nf">1</span>
  k<span class="n">1</span> <span class="nb">sensekey</span>
  <span class="nb">printk2</span> k<span class="n">1</span>
<span class="kd">endin</span>


<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>

<span class="c1">; Play Instrument #1 for thirty seconds.</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">30</span>
<span class="nb">e</span>


<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />

      Voici à quoi devrait ressembler la sortie si la touche "q" est enfoncée...
      </p>
        <pre class="screen">
q i1   113.00000</pre>
        <p>
    </p>
        <p>
      Voici un exemple de l'opcode sensekey en conjonction avec
      <a class="link" href="FLpanel.html" title="FLpanel"><em class="citetitle">FLpanel</em></a>.
      Il utilise le fichier
      <a class="ulink" href="examples/FLpanel-sensekey.csd" target="_top"><em class="citetitle">FLpanel-sensekey.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm46197555676160"></a>
          <p class="title">
            <strong>Exemple 870. Exemple de l'opcode sensekey utilisant la capture clavier depuis
        un FLpanel.</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm46197370668800"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>

<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
<span class="c1">; Audio out   Audio in    No messages</span>
-odac           -iadc     -d     <span class="c1">;;;RT audio I/O</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o FLpanel-sensekey.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>

<span class="nt">&lt;CsInstruments&gt;</span>
<span class="c1">; Example by Johnathan Murphy</span>

  <span class="vg">sr</span>	    <span class="o">=</span>  <span class="mi">44100</span>
  <span class="vg">ksmps</span>	    <span class="o">=</span>  <span class="mi">128</span>
  <span class="vg">nchnls</span>    <span class="o">=</span>  <span class="mi">2</span>


	<span class="c1">; ikbdcapture flag set to 1</span>
  i<span class="n">key</span>	    <span class="nb">init</span>      <span class="mi">1</span> 		
 
	    <span class="nb">FLpanel</span>   <span class="s">"sensekey"</span><span class="p">,</span> <span class="mi">740</span><span class="p">,</span> <span class="mi">340</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> i<span class="n">key</span>
  gk<span class="n">asc</span><span class="p">,</span> gi<span class="n">asc</span>	<span class="nb">FLbutBank</span>	<span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span>
	    <span class="nb">FLpanelEnd</span>
	    <span class="nb">FLrun</span>

    <span class="kd">instr</span> <span class="nf">1</span>

  k<span class="n">key</span>	    <span class="nb">sensekey</span>
  k<span class="n">print</span>    <span class="nb">changed</span>   k<span class="n">key</span>
	    <span class="nb">FLsetVal</span>  k<span class="n">print</span><span class="p">,</span> k<span class="n">key</span><span class="p">,</span> gi<span class="n">asc</span>

    <span class="kd">endin</span>

<span class="nt">&lt;/CsInstruments&gt;</span>

<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">60</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>

<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
      Le bouton allumé dans la fenêtre <span class="emphasis"><em>FLpanel</em></span> montre la
      dernière touche enfoncée.
    </p>
        <p>
      Voici une exemple plus complexe de l'opcode sensekey en conjonction avec
      <a class="link" href="FLpanel.html" title="FLpanel"><em class="citetitle">FLpanel</em></a>.
      Il utilise le fichier
      <a class="ulink" href="examples/FLpanel-sensekey.csd" target="_top"><em class="citetitle">FLpanel-sensekey2.csd</em></a>.
      </p>
        <div class="example">
          <a id="idm46197555671664"></a>
          <p class="title">
            <strong>Exemple 871. Exemple de l'opcode sensekey utilisant la capture clavier depuis
        un FLpanel.</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm46197370766832"></a>
              <pre class="programlisting">
<span class="nt">&lt;CsoundSynthesizer&gt;</span>
<span class="nt">&lt;CsOptions&gt;</span>
<span class="c1">; Select audio/midi flags here according to platform</span>
<span class="c1">; Audio out   Audio in    No messages</span>
-odac         <span class="c1">; -iadc     -d     ;;;RT audio I/O</span>
<span class="c1">; For Non-realtime ouput leave only the line below:</span>
<span class="c1">; -o FLpanel-sensekey2.wav -W ;;; for file output any platform</span>
<span class="nt">&lt;/CsOptions&gt;</span>
<span class="nt">&lt;CsInstruments&gt;</span>
<span class="vg">sr</span> <span class="o">=</span>  <span class="mi">48000</span>
<span class="vg">ksmps</span> <span class="o">=</span>  <span class="mi">32</span>
<span class="vg">nchnls</span> <span class="o">=</span>  <span class="mi">1</span>
<span class="c1">; Example by Istvan Varga</span>
<span class="c1">; if the FLTK opcodes are commented out, sensekey will read keyboard</span>
<span class="c1">; events from stdin</span>
        <span class="nb">FLpanel</span> <span class="s">""</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
        <span class="nb">FLlabel</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="nb">FLgroup</span> <span class="s">"Keyboard Input"</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="nb">FLgroupEnd</span>
        <span class="nb">FLpanelEnd</span>

        <span class="nb">FLrun</span>

        <span class="kd">instr</span> <span class="nf">1</span>

k<span class="n">trig1</span> <span class="nb">init</span> <span class="mi">1</span>
k<span class="n">trig2</span> <span class="nb">init</span> <span class="mi">1</span>
<span class="nl">nxtKey1</span><span class="p">:</span>
k<span class="n">1</span><span class="p">,</span> k<span class="n">2</span> <span class="nb">sensekey</span>
        <span class="k">if</span> <span class="p">(</span>k<span class="n">1</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> k<span class="n">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">then</span>
        <span class="nb">printf</span> <span class="s">"Key code = </span><span class="si">%02X</span><span class="s">, state = </span><span class="si">%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">trig1</span><span class="p">,</span> k<span class="n">1</span><span class="p">,</span> k<span class="n">2</span>
k<span class="n">trig1</span> <span class="o">=</span>  <span class="mi">3</span> <span class="o">-</span> k<span class="n">trig1</span>
        <span class="k">kgoto</span> <span class="nl">nxtKey1</span>
        <span class="k">endif</span>
<span class="nl">nxtKey2</span><span class="p">:</span>
k<span class="n">3</span> <span class="nb">sensekey</span>
        <span class="k">if</span> <span class="p">(</span>k<span class="n">3</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">then</span>
        <span class="nb">printf</span> <span class="s">"Character = '</span><span class="si">%c</span><span class="s">'</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> k<span class="n">trig2</span><span class="p">,</span> k<span class="n">3</span>
k<span class="n">trig2</span> <span class="o">=</span>  <span class="mi">3</span> <span class="o">-</span> k<span class="n">trig2</span>
        <span class="k">kgoto</span> <span class="nl">nxtKey2</span>
        <span class="k">endif</span>

        <span class="kd">endin</span>

<span class="nt">&lt;/CsInstruments&gt;</span>
<span class="nt">&lt;CsScore&gt;</span>
<span class="nb">i</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">3600</span>
<span class="nb">e</span>
<span class="nt">&lt;/CsScore&gt;</span>
<span class="nt">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
      La sortie console ressemblera à ceci :
</p>
        <div class="literallayout">
          <p><br />
new alloc for instr 1:<br />
Key code = 65, state = 1<br />
Character = 'e'<br />
Key code = 65, state = 0<br />
Key code = 72, state = 1<br />
Character = 'r'<br />
Key code = 72, state = 0<br />
Key code = 61, state = 1<br />
Character = 'a'<br />
Key code = 61, state = 0</p>
        </div>
        <p>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197555668480"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="FLpanel.html" title="FLpanel"><em class="citetitle">FLpanel</em></a>,
      <a class="link" href="FLkeyIn.html" title="FLkeyIn"><em class="citetitle">FLkeyIn</em></a>
    </p>
      </div>
      <div class="refsect1">
        <a id="idm46197555665408"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : John ffitch</td>
          </tr>
          <tr>
            <td>Université de Bath, Codemist. Ltd.</td>
          </tr>
          <tr>
            <td>Bath, UK</td>
          </tr>
          <tr>
            <td>Octobre 2000</td>
          </tr>
        </table>
        <p>
    </p>
        <p>Exemples écrits par Kevin Conder, Johnathan Murphy et Istvan Varga.</p>
        <p>Nouveau dans la version 4.09 de Csound. Renommé dans la version 4.10 de Csound.</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="sense.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="serialBegin.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">sense </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> serialBegin</td>
        </tr>
      </table>
    </div>
  </body>
</html>
