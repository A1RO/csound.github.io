<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>hrtfstat</title>
    <link rel="stylesheet" type="text/css" href="csound.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="home" href="index.html" title="Manuel de référence canonique de Csound" />
    <link rel="up" href="OpcodesTop.html" title="Opcodes et opérateurs de l'orchestre" />
    <link rel="prev" href="hrtfreverb.html" title="hrtfreverb" />
    <link rel="next" href="hsboscil.html" title="hsboscil" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">hrtfstat</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="hrtfreverb.html">Précédent</a> </td>
          <th width="60%" align="center">Opcodes et opérateurs de l'orchestre</th>
          <td width="20%" align="right"> <a accesskey="n" href="hsboscil.html">Suivant</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="refentry">
      <a id="hrtfstat"></a>
      <div class="titlepage"></div>
      <a id="IndexHrtfstat" class="indexterm"></a>
      <div class="refnamediv">
        <h2>
          <span class="refentrytitle">hrtfstat</span>
        </h2>
        <p>hrtfstat — 
      Génère un signal audio statique 3D binaural pour casque en utilisant un
      modèle de Woodworth de tête sphérique avec précision améliorée de la phase
      en basse fréquence.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887669600736"></a>
        <h2>Description</h2>
        <p>
      Cet opcode prend un signal source et le spatialise dans les trois dimensions
      entourant l'auditeur en utilisant des filtres basés sur une fonction de
      transfert en relation avec la tête (HRTF). Il produit une sortie statique
      (les paramètres d'azimut et d'élévation sont de taux-i), car une source
      statique permet un traitement bien plus efficace que
      <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a> et
      <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>. 
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887669596976"></a>
        <h2>Syntaxe</h2>
        <pre class="synopsis">
      aleft, aright <span class="command"><strong>hrtfstat</strong></span> asrc, iAz, iElev, ifilel, ifiler [,iradius, isr]
    </pre>
      </div>
      <div class="refsect1">
        <a id="idm47887669594736"></a>
        <h2>Initialisation</h2>
        <p>
      <span class="emphasis"><em>iAz</em></span> -- valeur d'azimut en degrés. Les valeurs positives
      représentent les positions sur la droite, les valeurs négatives les positions
      sur la gauche.
    </p>
        <p>
      <span class="emphasis"><em>iElev</em></span> -- valeur d'élévation en degrés. Les valeurs
      positives représentent les positions au-dessus de l'horizontale, les valeurs
      négatives les positions sous l'horizontale (min -40).
    </p>
        <p>
      <span class="emphasis"><em>ifilel </em></span> -- fichier des données spectrales HRTF de gauche.
    </p>
        <p>
      <span class="emphasis"><em>ifiler </em></span> -- fichier des données spectrales HRTF de droite.
    </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Des fichiers de données spectrales (basés sur la base de donnée HTRF du MIT)
        sont disponibles dans trois taux d'échantillonnage : 44.1, 48 et 96 kHz et
        sont nommés en conséquense. Le <span class="emphasis"><em>sr</em></span> d'entrée et de
        traitement doit concorder avec celui du fichier de données. Les fichiers
        doivent se trouver dans le répertoire courant ou le SADIR (voir
        <a class="link" href="CommandEnvironment.html" title="Variables d'environnement de Csound"><em class="citetitle">Variables d'Environnement</em></a>).
      </p>
              </td>
            </tr>
          </table>
        </div>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
          <table border="0" summary="Note">
            <tr>
              <td rowspan="2" align="center" valign="top" width="25">
                <img alt="[Note]" src="images/note.png" />
              </td>
              <th align="left">Note</th>
            </tr>
            <tr>
              <td align="left" valign="top">
                <p>
        Les fichiers de données HRTF à utiliser avec 
        <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>,
        <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>,
        <a class="link" href="hrtfstat.html" title="hrtfstat"><em class="citetitle">hrtfstat</em></a>,
        <a class="link" href="hrtfearly.html" title="hrtfearly"><em class="citetitle">hrtfearly</em></a> et
        <a class="link" href="hrtfreverb.html" title="hrtfreverb"><em class="citetitle">hrtfreverb</em></a>
        ont été mis à jour pour les versions 5.15 et ultérieures de Csound (le
        code a été mis à jour et il est plus efficace). Les anciens fichiers de
        données sont maintenant obsolètes.
      </p>
              </td>
            </tr>
          </table>
        </div>
        <p>
      <span class="emphasis"><em>iradius</em></span> -- facultatif, rayon de la tête en centimètres
      utilisé pour le calcul du spectre de phase (9.0 par défaut).
    </p>
        <p>
      <span class="emphasis"><em>isr</em></span> - facultatif (44.1 kHz par défaut). Les valeurs
      autorisées sont 44100, 48000 et 96000.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887669578560"></a>
        <h2>Exécution</h2>
        <p>
      Une spatialisation statique sans artefact définie par l'utilisateur est
      rendue possible au moyen d'un algorithme basé sur l'interpolation de
      magnitude spectrale et un spectre de phase dérivé basé sur le modèle de
      tête sphérique de Woodworth. La précision de l'ensemble de données fourni
      est augmentée en extrayant et en appliquant au spectre de phase un facteur
      de pondération dépendant de la fréquence, ce qui conduit à un délai
      interaural plus précis dans les basses fréquences. On peut contrôler le
      rayon de la tête pour la dérivation de la phase ce qui donne un niveau
      simple d'individualisation. La version à source statique de l'opcode
      utilise la convolution par chevauchement et addition (le traitement par
      TFCT n'est pas nécessaire, voir
      <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>), et
      elle est ainsi considérablement plus efficace que
      <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a> ou
      <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>, mais elle
      ne peut pas générer de sources en mouvement.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887669572432"></a>
        <h2>Exemples</h2>
        <p>
      Voici un exemple de l'opcode hrtfstat. Il utilise le fichier
      <a class="ulink" href="examples/hrtfstat.csd" target="_top"><em class="citetitle">hrtfstat.csd</em></a>. 
    </p>
        <div class="example">
          <a id="idm47887669570432"></a>
          <p class="title">
            <strong>Exemple 393. Exemple de l'opcode hrtfstat.
      </strong>
          </p>
          <div class="example-contents">
            <p>Voir les sections <a class="link" href="UsingRealTime.html" title="Audio en temps réel"><em class="citetitle">Audio en Temps Réel</em></a> et
        <a class="link" href="CommandFlags.html" title="Ligne de commande de Csound"><em class="citetitle">Options de la Ligne de Commande</em></a> pour
        plus d'information sur l'utilisation des options de la ligne de commande.</p>
            <div class="refsect1">
              <a id="idm47887520433600"></a>
              <pre class="programlisting">
<span class="csdtag">&lt;CsoundSynthesizer&gt;</span>
<span class="csdtag">&lt;CsOptions&gt;</span>
<span class="comment">; Select audio/midi flags here according to platform</span>
-odac      <span class="comment">;;;realtime audio out</span>
<span class="comment">;-iadc    ;;;uncomment -iadc if realtime audio input is needed too</span>
<span class="comment">; For Non-realtime ouput leave only the line below:</span>
<span class="comment">; -o hrtfstat.wav -W ;;; for file output any platform</span>
<span class="csdtag">&lt;/CsOptions&gt;</span>
<span class="csdtag">&lt;CsInstruments&gt;</span>

<span class="ohdr">sr</span> <span class="op">=</span> 44100
<span class="ohdr">ksmps</span> <span class="op">=</span> 32
<span class="ohdr">nchnls</span> <span class="op">=</span> 2
<span class="ohdr">0dbfs</span>  <span class="op">=</span> 1
    
gasrc <span class="opc">init</span> 0

<span class="oblock">instr</span> 1	<span class="comment">;a plucked string</span>

kamp <span class="op">=</span> p4
kcps <span class="op">=</span> <span class="opc">cpspch</span>(p5)
icps <span class="op">=</span> <span class="opc">cpspch</span>(p5)
a1 <span class="opc">pluck</span> kamp, kcps, icps, 0, 1

gasrc <span class="op">=</span> a1

<span class="oblock">endin</span>

<span class="oblock">instr</span> 10<span class="comment">;uses output from instr1 as source</span>

aleft,aright <span class="opc">hrtfstat</span> gasrc, 90,0, "hrtf<span class="op">-</span>44100<span class="op">-</span>left.dat","hrtf<span class="op">-</span>44100<span class="op">-</span>right.dat"
             <span class="opc">outs</span>     aleft, aright

<span class="opc">clear</span> gasrc
<span class="oblock">endin</span>

<span class="csdtag">&lt;/CsInstruments&gt;</span>
<span class="csdtag">&lt;CsScore&gt;</span>

<span class="stamnt">i</span>1 0 2 .7 8.00	<span class="comment">; Play Instrument 1: a plucked string</span>
<span class="stamnt">i</span>1 .5 2 .7 8.00
<span class="stamnt">i</span>1 1 2 .7 8.00
<span class="stamnt">i</span>1 2 2 .7 7.00

<span class="stamnt">i</span>10 0 12	<span class="comment">; Play Instrument 10 for 2 seconds.</span>

<span class="csdtag">&lt;/CsScore&gt;</span>
<span class="csdtag">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <br class="example-break" />
        <p>
      Voici un autre exemple de l'opcode hrtfstat. Il utilise les fichiers
      <a class="ulink" href="examples/hrtfstat-2.csd" target="_top"><em class="citetitle">htrfstat-2.csd</em></a>
      et <a class="ulink" href="examples/Church.wav" target="_top"><em class="citetitle">Church.wav</em></a>,
      qui contient un son échantillonné avec boucle.

      </p>
        <div class="example">
          <a id="idm47887669564224"></a>
          <p class="title">
            <strong>Exemple 394. Deuxième exemple de l'opcode hrtfstat</strong>
          </p>
          <div class="example-contents">
            <div class="refsect1">
              <a id="idm47887520432400"></a>
              <pre class="programlisting">
<span class="csdtag">&lt;CsoundSynthesizer&gt;</span>
<span class="csdtag">&lt;CsOptions&gt;</span>
<span class="comment">; Select audio/midi flags here according to platform</span>
-odac     <span class="comment">;;;realtime audio out</span>
<span class="comment">;-iadc    ;;;uncomment -iadc if realtime audio input is needed too</span>
<span class="comment">; For Non-realtime ouput leave only the line below:</span>
<span class="comment">; -o hrtfstat-2.wav -W ;;; for file output any platform</span>
<span class="csdtag">&lt;/CsOptions&gt;</span>
<span class="csdtag">&lt;CsInstruments&gt;</span>

<span class="ohdr">sr</span> <span class="op">=</span> 44100
<span class="ohdr">ksmps</span> <span class="op">=</span> 32
<span class="ohdr">nchnls</span> <span class="op">=</span> 2
<span class="ohdr">0dbfs</span>  <span class="op">=</span> 1

<span class="oblock">instr</span> 1

iAz   <span class="op">=</span> p4
iElev <span class="op">=</span> p5

itim <span class="op">=</span> <span class="opc">ftlptim</span>(1)
<span class="comment">;    transeg a   dur   ty  b  dur    ty  c    dur   ty  d</span>
kamp <span class="opc">transeg</span> 0, p3<span class="op">*</span>.1, 0, .9, p3<span class="op">*</span>.3, <span class="op">-</span>3, .5,  p3<span class="op">*</span>.3, <span class="op">-</span>2, 0
ain  <span class="opc">loscil3</span> kamp, 50, 1
aleft,aright <span class="opc">hrtfstat</span> ain, iAz, iElev, "hrtf<span class="op">-</span>44100<span class="op">-</span>left.dat","hrtf<span class="op">-</span>44100<span class="op">-</span>right.dat"
     <span class="opc">outs</span> aleft, aright

<span class="oblock">endin</span>
<span class="csdtag">&lt;/CsInstruments&gt;</span>
<span class="csdtag">&lt;CsScore&gt;</span>
<span class="stamnt">f</span> 1 0 0 1 "Church.wav" 0 0 0 <span class="comment">;Csound computes tablesize</span>

<span class="comment">;      Azim Elev</span>
<span class="stamnt">i</span>1 0 7  90   0  <span class="comment">;to the right</span>
<span class="stamnt">i</span>1 3 7 -90  -40 <span class="comment">;to the left and below</span>
<span class="stamnt">i</span>1 6 7 180   90 <span class="comment">;behind and up</span>
<span class="stamnt">e</span> 
<span class="csdtag">&lt;/CsScore&gt;</span>
<span class="csdtag">&lt;/CsoundSynthesizer&gt;</span>
</pre>
            </div>
          </div>
        </div>
        <p><br class="example-break" />
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887669562256"></a>
        <h2>Voir aussi</h2>
        <p>
      <a class="link" href="hrtfmove.html" title="hrtfmove"><em class="citetitle">hrtfmove</em></a>,
      <a class="link" href="hrtfmove2.html" title="hrtfmove2"><em class="citetitle">hrtfmove2</em></a>,
      <a class="link" href="hrtfer.html" title="hrtfer"><em class="citetitle">hrtfer</em></a>.
    </p>
        <p>Plus d'information sur cet opcode :
      <a class="ulink" href="http://www.csoundjournal.com/issue9/newHRTFOpcodes.html" target="_top"><em class="citetitle">http://www.csoundjournal.com/issue9/newHRTFOpcodes.html</em></a>,
      écrit par Brian Carty.
    </p>
      </div>
      <div class="refsect1">
        <a id="idm47887669556832"></a>
        <h2>Crédits</h2>
        <p>
      </p>
        <table border="0" summary="Simple list" class="simplelist">
          <tr>
            <td>Auteur : Brian Carty</td>
          </tr>
          <tr>
            <td>Maynooth</td>
          </tr>
          <tr>
            <td>2008</td>
          </tr>
        </table>
        <p>
    </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="hrtfreverb.html">Précédent</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="OpcodesTop.html">Niveau supérieur</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="hsboscil.html">Suivant</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">hrtfreverb </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Sommaire</a>
          </td>
          <td width="40%" align="right" valign="top"> hsboscil</td>
        </tr>
      </table>
    </div>
  </body>
</html>
